!function(t){var e={};function i(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){i(2),t.exports=i(1)},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i.p+"e4a408b1a807e336fcd61bdbd4f1d905.png";var s={preRender:t=>{document.getElementById("content").innerHTML=`\n    <div class="container-fluid bg-dark text-white text-center">\n      <div class="container">\n        <div class="row">\n          <div class="col-12 py-3">\n            <h1>Battleship</h1>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class="container">\n      <div class="row">\n        <div class="col-md-6">\n            <h2> Your Board </h2>\n            <p> Move the ships by dragging the achor <img src="${n}" with="30" height="30"> </p>\n            <div class="boxcontainer" id="ini"></div>\n        </div>\n        <div class="col-12 text-center mt-2">\n          <h3 id="message"></h3>\n        </div>\n        <div class="col-12 mt-3">\n          <button class="btn btn-success" id="startGame">Start Game </button>\n        </div>\n      </div>\n    </div>\n    `,document.getElementById("startGame").addEventListener("click",()=>t())},render:(t,e,i)=>{const n=document.getElementById("ini");let s="";for(let e=1;e<=100;e+=1){const i=t[e]?["ship"]:[];t[e]&&t[e].first&&i.push("firstItem"),s+=`\n      <div id="position-${e}" class="${i.join(" ")}"\n      ${t[e]?`data-shipid="${t[e].id}"`:""}\n\n       ${t[e]&&t[e].first?'draggable="true"':""}>\n      </div>`}n.innerHTML=s;for(let i=1;i<=100;i+=1)t[i]&&t[i].first&&document.getElementById(`position-${i}`).addEventListener("dragstart",t=>e(t));for(let e=1;e<=100;e+=1)t[e]||document.getElementById(`position-${e}`).addEventListener("drop",t=>i(t))}};class o{constructor(t){this.id=t,this.x=t%10,this.y=Math.floor(t/10),this.hited=!1}}class r{constructor(t){this.positions=[],this.id=t}get length(){return this.positions.length}hit(t){this.positions.forEach(e=>{e.id===t&&(e.hited=!0)})}hitXY(t,e){this.positions.forEach(i=>{i.x===t&&i.y===e&&(i.hited=!0)})}isSunk(){return 0!==this.positions.length&&this.positions.every(t=>t.hited)}addPosition(t){this.positions.push(new o(t))}}class a{constructor(){this.ships=[],this.grid=new Array(101).fill(null),this.counter=1}fillGrid(){this.grid.forEach((t,e)=>{this.grid[e]={hited:!1,ship:null,sunk:!1}})}getShip(t){let e=!1;return this.ships.forEach((i,n)=>{i.positions.find(e=>e.id===t)&&(e=i)}),e||!1}sunkShip(t){this.grid.forEach(e=>{e.ship===t.id&&(e.sunk=!0)})}placeShip(t,e){const i=[...t],n=new r(this.counter+=1),s=i[0]===e[0]?1:0;for(;i[s]<=e[s];){const t=10*i[0===s?s:0]+i[1===s?s:1];n.addPosition(t),this.grid[t].ship=n.id,i[s]+=1}this.ships.push(n)}receiveAttack(t,e){const i=10*t+e;return this.grid[i].hited=!0,!!this.grid[i].ship&&(this.ships.find(t=>t.id===this.grid[i].ship).hit(i),!0)}validAttack(t,e){const i=10*t+e;return!this.grid[i].hited}allSunk(){return 0!==this.ships.length&&this.ships.every(t=>t.isSunk())}}class d{constructor(t,e=!1){this.ai=e,this.gameboard=t}getAiAttack(t){const e=[];this.gameboard.grid.forEach((t,i)=>{t.hited||e.push(i)}),0===e[0]&&e.shift();let i=[];t&&(t%10!=1&&i.push(t-1),t%10!=0&&i.push(t+1),i.push(t+10),i.push(t-10),i=i.filter(t=>e.includes(t)));let n=e[Math.floor(Math.random()*e.length)];return i.length>0&&(n=i[Math.floor(Math.random()*i.length)]),n}}var c=(()=>{let t;const e=(t,e="message")=>{document.getElementById(e).innerHTML=t};return{preRender:()=>{document.getElementById("content").innerHTML='\n    <div class="container-fluid bg-dark text-white text-center">\n      <div class="container">\n        <div class="row">\n          <div class="col-12 py-3">\n            <h1>Battleship</h1>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class="container">\n      <div class="row">\n        <div class="col-md-6">\n            <h2> Your Board </h2>\n            <div class="boxcontainer" id="first"></div>\n        </div>\n        <div class="col-md-6">\n            <h2> Not your board </h2>\n            <div class="boxcontainer" id="second"></div>\n        </div>\n        <div class="col-12 text-center mt-2">\n          <h3 id="message"></h3>\n          <h4 id="destroy"></h4>\n        </div>\n      </div>\n    </div>\n    '},render:(e,i=!1)=>{const n=document.getElementById(e.gameboardName);let s="";for(let t=1;t<=100;t+=1){const i=e.gameboard.grid[t],n=i.ship&&!e.ai?["ship"]:[];i.sunk?n.push("ship-destroyed"):i&&i.ship&&i.hited&&n.push("ship-border"),s+=`\n      <div id="${e.gameboardName}-position-${t}"\n           class="${n.join(" ")}">\n        ${i.hited?"X":""}\n      </div>`}if(n.innerHTML=s,!i)for(let i=1;i<=100;i+=1){document.getElementById(`${e.gameboardName}-position-${i}`).addEventListener("click",t.handleClick)}},setController:e=>{t=e},winnerMessage:t=>{e(`${t.ai?"AI is":"You are"} the winner!!!`)},turnMessage:t=>{e(`${t.ai?"Computer's":"your"} turn`)},sunkMessage:(t="Ship destroyed!!")=>{e(t,"destroy")}}})();var l=(()=>{let t;const e=[];let i=!0;const n=(t=!0)=>e[i?t?0:1:t?1:0],s=(e,o=null)=>{let r,a=!1;if(r=o||parseInt(e.target.id.split("-")[2],10),n(!1).gameboard.validAttack(Math.floor(r/10),r%10)){if(n(!1).gameboard.receiveAttack(Math.floor(r/10),r%10)){let e=n(!1).gameboard.getShip(r);e.isSunk()&&(n(!1).gameboard.sunkShip(e),t.sunkMessage()),t.render(n(),n(!1).ai),t.render(n(!1)),t.turnMessage(n()),a=r}else t.render(n(),n(!1).ai),t.render(n(!1),!0),i=!i,t.sunkMessage(""),t.turnMessage(n());if(n().gameboard.allSunk())t.render(n(),!0),t.render(n(!1),!0),t.winnerMessage(n(!1));else if(n().ai){const t=n(!1).getAiAttack(a);setTimeout(()=>{s(!1,t)},2e3)}}};return{setUp:(i,s,o)=>{t=i,e[0]=s,e[1]=o,t.turnMessage(n())},handleClick:s}})();var h=(()=>{const t=new Array(101).fill(null);let e=0;const i=[];let n;const o=t=>{t.dataTransfer.setData("aid",parseInt(t.target.id.split("-")[1],10)),t.dataTransfer.setData("ship-id",parseInt(t.target.dataset.shipid,10))},r=e=>{const n=parseInt(e.target.id.split("-")[1],10),a=parseInt(e.dataTransfer.getData("aid"),10),d=i.find(t=>t.id===parseInt(e.dataTransfer.getData("ship-id"),10)),c=n-a,l=d.positions.map(t=>{const e=t.position+c;return{id:t.id,first:t.first,position:e,startPosition:t.position}});let h=!0;const p=[];l.forEach(e=>{e.position<1&&(h=!1),e.position>100&&(h=!1),t[e.position]&&(h=!1);const i=e.startPosition-1<10?0:Math.floor((e.startPosition-1)/10),n=e.position-1<10?0:Math.floor((e.position-1)/10);p.push([i,n])});const u=Math.floor(d.positions[0].position/10);if(d.positions.every(t=>Math.floor(t.position/10)===u)&&(p.every(t=>t[0]===p[0][0]&&t[1]===p[0][1])||(h=!1)),h){d.positions.forEach(e=>{t[e.position]=null});const e=[];l.forEach(i=>{const n={id:i.id,first:i.first,position:i.position};t[i.position]=n,e.push(n)}),d.positions=e}s.render(t,o,r)},h=()=>{c.setController(l),c.preRender();const t=new d(new a);t.gameboardName="first",t.gameboard.fillGrid(),i.forEach(e=>{const i=e.positions[0].position,n=[Math.floor(i/10),i%10],s=e.positions[e.positions.length-1].position,o=[Math.floor(s/10),s%10];t.gameboard.placeShip(n,o)});const e=new d(new a,!0);e.gameboardName="second",e.gameboard.fillGrid(),n.forEach(t=>{e.gameboard.placeShip(t[0],t[1])}),c.render(e),c.render(t,!0),l.setUp(c,t,e)};return{setUp:a=>{n=a,s.preRender(h),a.forEach(n=>{((n,s)=>{const o=[...n];e+=1;const r=o[0]===s[0]?1:0;let a=!0;const d={id:e,positions:[]};for(;o[r]<=s[r];){const i=10*o[0===r?r:0]+o[1===r?r:1],n={id:e,first:a,position:i};t[i]=n,d.positions.push(n),a=!1,o[r]+=1}i.push(d)})(n[0],n[1])}),s.render(t,o,r)}}})();document.addEventListener("dragover",t=>{t.preventDefault()});h.setUp([[[1,2],[1,2]],[[0,8],[0,8]],[[8,2],[8,2]],[[8,8],[8,8]],[[5,2],[6,2]],[[4,4],[4,5]],[[3,1],[3,3]],[[2,4],[2,6]],[[2,9],[4,9]],[[6,4],[6,8]]])}]);