!function(t){var n={};function e(i){if(n[i])return n[i].exports;var s=n[i]={i:i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,e),s.l=!0,s.exports}e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:i})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var s in t)e.d(i,s,function(n){return t[n]}.bind(null,s));return i},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=0)}([function(t,n,e){e(2),t.exports=e(1)},function(t,n,e){},function(t,n,e){"use strict";e.r(n);var i=e.p+"e4a408b1a807e336fcd61bdbd4f1d905.png";var s={preRender:t=>{document.getElementById("content").innerHTML=`\n    <div class="container-fluid bg-dark text-white text-center">\n      <div class="container">\n        <div class="row">\n          <div class="col-12 py-3">\n            <h1>Battleship</h1>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class="container">\n      <div class="row">\n        <div class="col-md-6">\n            <h2> Your Board </h2>\n            <p> Move the ships by dragging the achor <img src="${i}" with="30" height="30"> </p>\n            <div class="boxcontainer" id="ini"></div>\n        </div>\n        <div class="col-12 text-center mt-2">\n          <h3 id="message"></h3>\n        </div>\n        <div class="col-12 mt-3">\n          <button class="btn btn-success" id="startGame">Start Game </button>\n        </div>\n      </div>\n    </div>\n    `,document.getElementById("startGame").addEventListener("click",()=>t())},render:(t,n,e)=>{const i=document.getElementById("ini");let s="";for(let n=1;n<=100;n+=1){const e=t[n]?["ship"]:[];t[n]&&t[n].first&&e.push("firstItem"),s+=`\n      <div id="position-${n}" class="${e.join(" ")}"\n      ${t[n]?`data-shipid="${t[n].id}"`:""}\n\n       ${t[n]&&t[n].first?'draggable="true"':""}>\n      </div>`}i.innerHTML=s;for(let e=1;e<=100;e+=1)t[e]&&t[e].first&&document.getElementById(`position-${e}`).addEventListener("dragstart",t=>n(t));for(let n=1;n<=100;n+=1)t[n]||document.getElementById(`position-${n}`).addEventListener("drop",t=>e(t))}};class o{constructor(t){this.id=t,this.x=t%10,this.y=Math.floor(t/10),this.hited=!1}}class r{constructor(t){this.positions=[],this.id=t}get length(){return this.positions.length}hit(t){this.positions.forEach(n=>{n.id===t&&(n.hited=!0)})}hitXY(t,n){this.positions.forEach(e=>{e.x===t&&e.y===n&&(e.hited=!0)})}isSunk(){return 0!==this.positions.length&&this.positions.every(t=>t.hited)}addPosition(t){this.positions.push(new o(t))}}class a{constructor(){this.ships=[],this.grid=new Array(101).fill(null),this.counter=1}placeShip(t,n){const e=[...t],i=new r(this.counter+=1),s=e[0]===n[0]?1:0;for(;e[s]<=n[s];){const t=10*e[0===s?s:0]+e[1===s?s:1];i.addPosition(t),this.grid[t]=i.id,e[s]+=1}this.ships.push(i)}receiveAttack(t,n){const e=10*t+n;return this.grid[e]?(this.ships.find(t=>t.id===this.grid[e]).hit(e),this.grid[e]="Y",!0):(this.grid[e]="X",!1)}validAttack(t,n){const e=10*t+n;return"X"!==this.grid[e]&&"Y"!==this.grid[e]}allSunk(){return 0!==this.ships.length&&this.ships.every(t=>t.isSunk())}}class d{constructor(t,n=!1){this.ai=n,this.gameboard=t}}var c=(()=>{let t;const n=t=>{document.getElementById("message").innerHTML=t};return{preRender:()=>{document.getElementById("content").innerHTML='\n    <div class="container-fluid bg-dark text-white text-center">\n      <div class="container">\n        <div class="row">\n          <div class="col-12 py-3">\n            <h1>Battleship</h1>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class="container">\n      <div class="row">\n        <div class="col-md-6">\n            <h2> Your Board </h2>\n            <div class="boxcontainer" id="first"></div>\n        </div>\n        <div class="col-md-6">\n            <h2> Not your board </h2>\n            <div class="boxcontainer" id="second"></div>\n        </div>\n        <div class="col-12 text-center mt-2">\n          <h3 id="message"></h3>\n        </div>\n      </div>\n    </div>\n    '},render:(n,e=!1)=>{const i=document.getElementById(n.gameboardName);let s="";for(let t=1;t<=100;t+=1){const e=n.gameboard.grid[t],i=e&&"X"!==e&&!n.ai?["ship"]:[];e&&"Y"===e&&i.push("ship-border"),s+=`\n      <div id="${n.gameboardName}-position-${t}"\n           class="${i.join(" ")}">\n        ${"X"===e||"Y"===e?"X":""}\n      </div>`}if(i.innerHTML=s,!e)for(let e=1;e<=100;e+=1){document.getElementById(`${n.gameboardName}-position-${e}`).addEventListener("click",t.handleClick)}},setController:n=>{t=n},winnerMessage:t=>{n(`${t.ai?"AI is":"You are"} the winner!!!`)},turnMessage:t=>{n(`${t.ai?"Computer's":"your"} turn`)}}})();var l=(()=>{let t;const n=[];let e=!0;const i=(t=!0)=>n[e?t?0:1:t?1:0],s=(n,s=null)=>{let r,a=!1;r=s||parseInt(n.target.id.split("-")[2],10),i(!1).gameboard.validAttack(Math.floor(r/10),r%10)&&(i(!1).gameboard.receiveAttack(Math.floor(r/10),r%10)?(t.render(i(),i(!1).ai),t.render(i(!1)),t.turnMessage(i()),a=r):(t.render(i(),i(!1).ai),t.render(i(!1),!0),e=!e,t.turnMessage(i())),i().gameboard.allSunk()?(t.render(i(),!0),t.render(i(!1),!0),t.winnerMessage(i(!1))):i().ai&&o(i(!1),a))},o=(t,n)=>{const e=[];t.gameboard.grid.forEach((t,n)=>{"X"!==t&&"Y"!==t&&e.push(n)}),0===e[0]&&e.shift();let i=[];n&&(n%10!=1&&i.push(n-1),n%10!=0&&i.push(n+1),i.push(n+10),i.push(n-10),i=i.filter(t=>e.includes(t)));let o=e[Math.floor(Math.random()*e.length)];i.length>0&&(o=i[Math.floor(Math.random()*i.length)]),setTimeout(()=>{s(!1,o)},2e3)};return{setUp:(e,s,o)=>{t=e,n[0]=s,n[1]=o,t.turnMessage(i())},handleClick:s}})();var h=(()=>{const t=new Array(101).fill(null);let n=0;const e=[];let i;const o=t=>{t.dataTransfer.setData("aid",parseInt(t.target.id.split("-")[1],10)),t.dataTransfer.setData("ship-id",parseInt(t.target.dataset.shipid,10))},r=n=>{const i=parseInt(n.target.id.split("-")[1],10),a=parseInt(n.dataTransfer.getData("aid"),10),d=e.find(t=>t.id===parseInt(n.dataTransfer.getData("ship-id"),10)),c=i-a,l=d.positions.map(t=>{const n=t.position+c;return{id:t.id,first:t.first,position:n,startPosition:t.position}});let h=!0;const p=[];l.forEach(n=>{n.position<1&&(h=!1),n.position>100&&(h=!1),t[n.position]&&(h=!1);const e=n.startPosition-1<10?0:Math.floor((n.startPosition-1)/10),i=n.position-1<10?0:Math.floor((n.position-1)/10);p.push([e,i])});const u=Math.floor(d.positions[0].position/10);if(d.positions.every(t=>Math.floor(t.position/10)===u)&&(p.every(t=>t[0]===p[0][0]&&t[1]===p[0][1])||(h=!1)),h){d.positions.forEach(n=>{t[n.position]=null});const n=[];l.forEach(e=>{const i={id:e.id,first:e.first,position:e.position};t[e.position]=i,n.push(i)}),d.positions=n}s.render(t,o,r)},h=()=>{c.setController(l),c.preRender();const t=new d(new a);t.gameboardName="first",e.forEach(n=>{const e=n.positions[0].position,i=[Math.floor(e/10),e%10],s=n.positions[n.positions.length-1].position,o=[Math.floor(s/10),s%10];t.gameboard.placeShip(i,o)});const n=new d(new a,!0);n.gameboardName="second",i.forEach(t=>{n.gameboard.placeShip(t[0],t[1])}),c.render(n),c.render(t,!0),l.setUp(c,t,n)};return{setUp:a=>{i=a,s.preRender(h),a.forEach(i=>{((i,s)=>{const o=[...i];n+=1;const r=o[0]===s[0]?1:0;let a=!0;const d={id:n,positions:[]};for(;o[r]<=s[r];){const e=10*o[0===r?r:0]+o[1===r?r:1],i={id:n,first:a,position:e};t[e]=i,d.positions.push(i),a=!1,o[r]+=1}e.push(d)})(i[0],i[1])}),s.render(t,o,r)}}})();document.addEventListener("dragover",t=>{t.preventDefault()});h.setUp([[[1,2],[1,2]],[[0,8],[0,8]],[[8,2],[8,2]],[[8,8],[8,8]],[[5,2],[6,2]],[[4,4],[4,5]],[[3,1],[3,3]],[[2,4],[2,6]],[[2,9],[4,9]],[[6,4],[6,8]]])}]);